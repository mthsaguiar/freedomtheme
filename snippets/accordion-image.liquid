{{ 'accordion-image.css' | asset_url | stylesheet_tag }}

<div class="accordion__image">
    <div class="accordion-image__img-wrapper">
        <img  srcset="{%- if image_id.width >= 375 -%}{{ image_id | img_url: '375x' }} 375w,{%- endif -%}
              {%- if image_id.width >= 750 -%}{{ image_id | img_url: '750x' }} 750w,{%- endif -%}
              {%- if image_id.width >= 1100 -%}{{ image_id | img_url: '1100x' }} 1100w,{%- endif -%}
              {%- if image_id.width >= 1500 -%}{{ image_id | img_url: '1500x' }} 1500w,{%- endif -%}
              {%- if image_id.width >= 1780 -%}{{ image_id | img_url: '1780x' }} 1780w,{%- endif -%}
              {%- if image_id.width >= 2000 -%}{{ image_id | img_url: '2000x' }} 2000w,{%- endif -%}
              {%- if image_id.width >= 3000 -%}{{ image_id | img_url: '3000x' }} 3000w,{%- endif -%}
              {%- if image_id.width >= 3840 -%}{{ image_id | img_url: '3840x' }} 3840w,{%- endif -%}
              {{ image_id | img_url: 'master' }} {{ image_id.width }}w"
        sizes="(min-width: 750px) 100vw" src="{{ image_id | img_url: '1500x' }}" loading="lazy"
        alt="{{ image_id.alt | escape }}" width="{{ image_id.width }}"
        height="{{ image_id.width | divided_by: image_id.aspect_ratio }}">
    </div>
    {% if enable_text %}
        <div class="accordion-image__text-content">
            {{ text_content_id }}
        </div>
    {%- else -%}
    <div class="accordion-image__img-content">
        <button class="accordion">{{tab_title_1}} <svg width="25" height="24" viewBox="0 0 25 24" fill="#ffc52c" xmlns="https://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0908203 16.909L2.27264 19.0908L12.0908 9.27264L21.909 19.0908L24.0908 16.909L12.0908 4.909L0.0908203 16.909Z"></path></svg>
        </button>
        <div class="panel">
            <p>{{ tab_content_1 }}</p>
        </div>

        <button class="accordion">{{tab_title_2}} <svg width="25" height="24" viewBox="0 0 25 24" fill="#ffc52c" xmlns="https://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0908203 16.909L2.27264 19.0908L12.0908 9.27264L21.909 19.0908L24.0908 16.909L12.0908 4.909L0.0908203 16.909Z"></path></svg>
        </button>
        <div class="panel">
            <p>{{ tab_content_2 }}</p>
        </div>

        <button class="accordion">{{tab_title_3}} <svg width="25" height="24" viewBox="0 0 25 24" fill="#ffc52c" xmlns="https://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.0908203 16.909L2.27264 19.0908L12.0908 9.27264L21.909 19.0908L24.0908 16.909L12.0908 4.909L0.0908203 16.909Z"></path></svg>
        </button>
        <div class="panel">
            <p>{{ tab_content_3 }}</p>
        </div>
    </div>
    {%- endif -%}
</div>



<script>
    const acc2 = document.querySelectorAll(".accordion-image__img-content .accordion");
    let i;
    
    for (i = 0; i < acc2.length; i++) {
      acc2[i].addEventListener("click", function() {
        this.classList.toggle("active");
        document.querySelectorAll(".accordion-image__img-content .accordion").forEach(e=>{
            if(e != this){
                e.classList.remove('active');
                const nextElement = e.nextElementSibling;
                nextElement.style.height = "0";
            }
        })
        const panel2 = this.nextElementSibling;
        const scrollHeight = panel2.scrollHeight;
        if (panel2.style.height === scrollHeight+'px') {
            panel2.style.height = "0";
        } else {
            panel2.style.height = scrollHeight+'px';
        }
      });
    }
</script>
    